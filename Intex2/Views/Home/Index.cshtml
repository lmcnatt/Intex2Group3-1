@{
    ViewData["Title"] = "Home Page";
}

@model List<Product>

<head>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

@* This is the cookie notification *@
<div>
    <div id="cookie-notification">
        <div id="cookie-content">
            <strong>COOKIE POLICY</strong><br>
            <span>Last updated April 08, 2024</span><br><br>
            <span>This Cookie Policy explains how Brickwell Creations uses cookies and similar technologies to recognize you when you visit our website. It explains what these technologies are and why we use them, as well as your rights to control our use of them.</span><br>
            <span>In some cases, we may use cookies to collect personal information, or that becomes personal information if we combine it with other information.</span><br><br>
            <strong>What are cookies?</strong><br><br>
            <span>Cookies are small data files that are placed on your computer or mobile device when you visit a website. Cookies are widely used by website owners to make their websites work, or to work more efficiently, as well as to provide reporting information.</span><br><br>
        </div>
        <button id="accept-cookies" class="pill-button" onclick="hideCookieNotification()">Accept</button>
    </div>

    <script>
        function hideCookieNotification() {
            var cookieNotification = document.getElementById("cookie-notification");
            cookieNotification.style.display = "none";
        }
    </script>
</div>

@* Homepage Content *@
<div>
    <img src="~/img/newlanding-cropped.png" alt="Build, Create, Inspire" class="img-fluid" style="object-fit: cover;">
</div>

<br /><br />
<body>
    <div class="row">
        <div class="col-10">
            <h2><b>Popular Picks</b></h2>
            <p class="subtext">From fan favorites to new releases, explore our curated selection of the most sought-after LEGO sets, handpicked based on popularity and purchases.</p>
        </div>
        <div class="col-2">
            <a class="nav-link text-dark" asp-area="" asp-controller="Home" asp-action="Products">
                <span>
                    <h4 style="display: inline-block; margin-right: 5px;"><b>Shop More</b></h4>
                    <i class="fas fa-arrow-right"></i>
                </span>
            </a>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-4">
            <div class="card">
                <div class="card-body context-card" style="align-content:center">
                    <img src="~/img/person.jpeg" alt="Learn More" class="icon" >
                    <h5 class="card-title">Special title treatment</h5>
                    <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
                    <a href="#" class="short-pill-button">Go somewhere</a>
                </div>
            </div>
        </div>
        <div class="col-sm-4">
            <div class="card">
                <div class="card-body">
                    <img src="~/img/legoheadicon.png" alt="Learn More" class="icon">
                    <h5 class="card-title">Special title treatment</h5>
                    <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
                    <a href="#" class="short-pill-button">Go somewhere</a>
                </div>
            </div>
        </div>
        <div class="col-sm-4">
            <div class="card">
                <div class="card-body">
                    <img src="~/img/account.png" alt="Learn More" class="icon">
                    <h5 class="card-title">Special title treatment</h5>
                    <p class="card-text">With supporting text below as a natural lead-in to additional content.</p>
                    <a href="#" class="short-pill-button">Go somewhere</a>
                </div>
            </div>
        </div>
    </div>


  @*   @foreach (var product in Model)
    {
        <strong>Product ID:</strong> @product.ProductId
        <br />
        <strong>Name:</strong> @product.Name
        <br />
        <strong>Price:</strong> @product.Price
        <br />
    }
 *@

    @{
        if (User.Identity.IsAuthenticated)
        {

            // var cartLines = ViewBag.CartLines as List<CartLine>;
            // var orders = ViewBag.Orders as List<Order>;

            // // Perform the LINQ query
            // var query = cartLines.Join(orders, cl => cl.OrderId, o => o.OrderId, (cl, o) => new { cl, o })
            // .Where(x => x.o.CustomerId == 1)
            // .GroupBy(x => x.cl.ProductId)
            // .OrderByDescending(g => g.Sum(x => x.cl.Quantity))
            // .Select(g => new { ProductId = g.Key, TotalQuantity = g.Sum(x => x.cl.Quantity) });

            // // Display the results
            // foreach (var item in query)
            // {
            //     <p>Product ID: @item.ProductId</p>
            //     <p>Total Quantity: @item.TotalQuantity</p>
            // }
        }

        else
        {
            // Handle the case where the user is not authenticated
            // For example, you might want to query a different set of data
        }
    }


</body>
